{"version":3,"sources":["Components/App.js","Components/Header.js","Components/Filters.js","Components/HomeItem.js","Components/Loading.js","Components/HomeList.js","Components/ErrorPage.js","Components/Main.js","index.js","Images/spinner.gif"],"names":["citySearch","Header","react_default","a","createElement","className","href","Component","Filters","_this$props","this","props","handleSelectPrice","sortPriceValue","handleSelectType","typeToFilter","value","name","id","onChange","defaultChecked","HomeItem","_this$props$property","property","photoUrls","title","pricePerMonth","src","homecard","alt","Loading","Spinner","HomeList","propertiesToPrint","length","map","index","key","Components_HomeItem","Components_Loading","ErrorPage","Main","errorInFetch","Components_Filters","Components_HomeList","Components_ErrorPage","fetchResults","fetchResultsDesc","App","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","propertiesFetch","propertiesPriceAsc","propertiesPriceDesc","getLocation","bind","assertThisInitialized","geoSuccess","geoError","fetchData","removePreviousData","navigator","geolocation","getCurrentPosition","alert","position","_this2","lat","coords","latitude","lng","longitude","fetch","concat","then","response","json","address","city","toLowerCase","catch","error","console","log","_this3","jsonResults","data","i","push","homecards","sort","b","toConsumableArray","setState","e","target","_this$state","react","Components_Header","Components_Main","numberResults","ReactDOM","render","Components_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.b4f92ddf.chunk.js","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport Header from './Header';\nimport Main from './Main';\n\nconst numberResults = 30;\nlet fetchResults = [];\nlet fetchResultsDesc = [];\nlet citySearch;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n        propertiesToPrint: [],\n        propertiesFetch: [],\n        propertiesPriceAsc: [],\n        propertiesPriceDesc: [],\n        sortPriceValue: \"ascending\",\n        typeToFilter: \"\",\n        errorInFetch: false,\n     }\n     this.getLocation = this.getLocation.bind(this);\n     this.geoSuccess = this.geoSuccess.bind(this);\n     this.geoError = this.geoError.bind(this);\n     this.fetchData=this.fetchData.bind(this);\n     this.handleSelectPrice = this.handleSelectPrice.bind(this);\n     this.handleSelectType = this.handleSelectType.bind(this);\n     this.removePreviousData = this.removePreviousData.bind(this);\n  }\n  \n  componentDidMount(){\n    //Geolocation functionality is not working well. Anyway, I decided to leave the code (functions below).\n\n    this.getLocation();\n  }\n\n  getLocation(){\n    if(navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(this.geoSuccess, this.geoError);\n    } else {\n        alert(\"Geolocation is not supported by this browser.\");\n        this.fetchData();\n    }\n  }\n\n  geoSuccess(position){\n    let lat = position.coords.latitude;\n    let lng = position.coords.longitude;\n    fetch(`https://nominatim.openstreetmap.org/reverse?format=json&accept-language=es&lat=${lat}&lon=${lng}&zoom=10&addressdetails=1`)\n    .then(response => response.json())\n    .then(json => citySearch = json.address.city.toLowerCase())\n    .then(()=> this.fetchData())\n    .catch(error => {\n      console.log('Error: ' + error)\n      this.fetchData()});\n  }\n\n  geoError() {\n    alert(\"Geocoder failed.\");\n    this.fetchData();\n  }\n\n  //Get data from fetch + save arrays of properties to print.\n\n  fetchData(){\n    console.log(this.state.typeToFilter);\n    this.removePreviousData();\n    fetch(`https://www.spotahome.com/api/public/listings/search/markers/${citySearch || 'madrid'}?type[]=${this.state.typeToFilter}`)\n    .then(response => response.json())\n    .then(json => {\n\n      let jsonResults = json.data;\n      for(var i = 0; i < numberResults; i++){\n        \n        fetch(`https://spotahome.com/api/public/listings/search/homecards_ids?ids%5B%5D=${jsonResults[i].id}&ids%5B%5D=${jsonResults[i].id}`)\n        .then(response => response.json())\n        .then(json => {\n\n          fetchResults.push(json.data.homecards[0]);\n\n          fetchResults.sort((a, b) =>{\n            return a.pricePerMonth - b.pricePerMonth;\n          });\n\n          fetchResultsDesc = [...fetchResults];\n\n          fetchResultsDesc.sort((b, a) =>{\n            return a.pricePerMonth - b.pricePerMonth;\n          });\n\n          this.setState({\n            propertiesToPrint: this.state.sortPriceValue === 'descending' ? fetchResultsDesc : fetchResults,\n            propertiesFetch: fetchResults,\n            propertiesPriceAsc: fetchResults,\n            propertiesPriceDesc: fetchResultsDesc,\n          })\n        })\n        .catch(() => this.setState({\n          errorInFetch: true,\n        }));\n      }\n    })\n    .catch(() => this.setState({\n      errorInFetch: true,\n    }));\n  }\n\n  //Select list to print when selecting option \"Sort by price\".\n\n  handleSelectPrice(e){\n    let value = e.target.value;\n    value === \"ascending\" \n      ? this.setState({\n        propertiesToPrint: this.state.propertiesPriceAsc,\n        sortPriceValue: 'ascending',\n      })\n      : this.setState({\n        propertiesToPrint: this.state.propertiesPriceDesc,\n        sortPriceValue: 'descending',\n      })\n  }\n\n  //Fetch data again when filtering by property type.\n\n  handleSelectType(e){\n    let value = e.target.value;\n    this.setState({\n      typeToFilter: value,\n    }, this.fetchData)\n  }\n\n  //Remove previous data when new fetch\n  \n  removePreviousData(){\n    fetchResults = [];\n    fetchResultsDesc = [];\n  }\n\n  render() {\n     \n    const{\n      propertiesToPrint,\n      typeToFilter,\n      errorInFetch, \n      sortPriceValue,\n    }=this.state;\n\n    return (\n      <Fragment> \n        <Header/>\n        <Main\n          propertiesToPrint={propertiesToPrint}\n          handleSelectPrice={this.handleSelectPrice} \n          numberResults={numberResults}\n          handleSelectType={this.handleSelectType}\n          typeToFilter={typeToFilter}\n          errorInFetch={errorInFetch}\n          sortPriceValue={sortPriceValue}\n        />\n      </Fragment>\n    );\n  }\n}\n \nexport default App;\n","import React, { Component } from 'react';\n\nclass Header extends Component {\n\n    render() { \n        return (\n            <header className=\"header\">\n                <div className=\"header__container\">\n                    <div className=\"header__logo\">\n                        <h1 className=\"header__logo-title\">Spot<span>A</span>Room</h1>\n                        <span className=\"header__logo-subtitle\">The best way to find your home</span>\n                    </div>\n                    <nav className=\"header__nav\">\n                        <ul>\n                            <li><a href=\"#\">The company</a></li>\n                            <li><a href=\"#\">How we work</a></li>\n                            <li><a href=\"#\">Contact us</a></li>\n                        </ul>\n                    </nav>\n                </div>\n            </header> \n         );\n    }\n}\n \nexport default Header;","import React, { Component } from 'react';\n\nclass Filters extends Component {\n    render() {\n        const{\n            handleSelectPrice,\n            sortPriceValue,\n            handleSelectType,\n            typeToFilter,\n        } = this.props;\n         \n        return (\n            <div className=\"main__filters\"> \n                <h2 className=\"main__filters-title\">Filters:</h2>\n                    <h3 className=\"main__filters-subtitle\">Property type:</h3>\n                        <select value={typeToFilter} name=\"\" id=\"\" onChange={handleSelectType}>\n                            <option value=\"\" defaultChecked>All</option>\n                            <option value=\"apartments\">Apartments</option>\n                            <option value=\"rooms\">Rooms</option>\n                            <option value=\"studios\">Studios</option>\n                            <option value=\"residences\">Residences</option>\n                        </select>    \n                    <h3 className=\"main__filters-subtitle\">Sort by price:</h3>\n                        <select value={sortPriceValue} name=\"\" id=\"\" onChange={handleSelectPrice}>\n                            <option value=\"ascending\" defaultChecked>Ascending</option>\n                            <option value=\"descending\">Descending</option>\n                        </select>\n            </div>\n        );\n    }\n}\n \nexport default Filters;","import React, { Component } from 'react';\n\nclass HomeItem extends Component {\n    render() { \n        const{\n            photoUrls,\n            title,\n            pricePerMonth,\n        }=this.props.property;\n        \n        return ( \n            <div className=\"main__results-item-wrapper\">\n                <div className=\"main__results-img\">\n                    <img src={photoUrls.homecard} alt={title}/>\n                </div>\n                <div className=\"main__results-data\">\n                    <div className=\"main__results-description\">\n                        <p>{title}</p>\n                    </div>\n                    <div className=\"main__results-side-wrapper\">\n                        <h4>{pricePerMonth}â‚¬</h4>\n                        <div className=\"main__results-btn-wrapper\">\n                            <button className=\"btn btn--info\">More details</button>\n                            <button className=\"btn btn--success\">Book now!</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n         );\n    }\n}\n \nexport default HomeItem;","import React, { Component } from 'react';\nimport Spinner from '../Images/spinner.gif'\n\nclass Loading extends Component {\n    render() { \n        return ( \n            <div className=\"main__results-spinner\">\n                <img  \n                    src={Spinner} \n                    alt='Cargando...'\n                />\n            </div>\n         );\n    }\n}\n \nexport default Loading;","import React, { Component } from 'react';\nimport HomeItem from './HomeItem';\nimport Loading from './Loading';\n\nclass HomeList extends Component {\n    render() { \n        const{\n            propertiesToPrint,\n        }=this.props;\n        \n        return ( \n            <div className=\"main__results\">\n                {propertiesToPrint.length > 0\n                    ?   <ul>\n                            {propertiesToPrint.map( (property, index) => {\n                                return(\n                                    <li className=\"main__results-item\" key={index}>\n                                        <HomeItem\n                                            property={property}\n                                        />\n                                    </li>\n                                )\n                            })} \n                        </ul>\n                    :   <Loading/>\n                }\n            </div>\n        )\n    }\n}\n \nexport default HomeList;","import React, { Component } from 'react';\n\nclass ErrorPage extends Component {\n    render() { \n        return ( \n            <div className=\"main__results\">\n                <p>Lo sentimos. Ha habido un error cargando datos.</p>\n            </div>\n         );\n    }\n}\n \nexport default ErrorPage;","import React, { Component } from 'react';\nimport Filters from './Filters';\nimport HomeList from './HomeList';\nimport ErrorPage from './ErrorPage';\n\nclass Main extends Component {\n    render() { \n        const{\n            propertiesToPrint,\n            handleSelectPrice,\n            sortPriceValue,\n            handleSelectType,\n            typeToFilter,\n            errorInFetch,\n        }=this.props;\n\n        return (\n            <main className=\"main\">\n                <Filters\n                    handleSelectPrice={handleSelectPrice}\n                    sortPriceValue={sortPriceValue}\n                    handleSelectType={handleSelectType}\n                    typeToFilter={typeToFilter}\n                />\n                {errorInFetch === false\n                    ?   <HomeList\n                            propertiesToPrint={propertiesToPrint} \n                        />\n                    :   <ErrorPage/>\n                }\n            </main>\n         );\n    }\n}\n \nexport default Main;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Styles/index.css';\nimport App from './Components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n","module.exports = __webpack_public_path__ + \"static/media/spinner.cffa9d9d.gif\";"],"sourceRoot":""}